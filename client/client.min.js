!function e(t,n,i){function u(o,s){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!s&&a)return a(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return u(n?n:e)},f,f.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)u(i[o]);return u}({1:[function(e,t,n){function i(e){return{name:c("h1",e).textContent,total:""+f(".test",e).length,failures:""+f(".fail",e).length}}function u(){location.reload()}var r=e("rijs.core")["default"],o=e("rijs.data")["default"],s=e("rijs.sync")["default"],a=s(o(r())),l=e("utilise/to"),f=e("utilise/all"),c=e("utilise/raw"),d=a.io,p=window.console;a.io.on("reload",u),a.io.on("connect",function(){a.io.on("connect",u)}),a("results",{stats:{running:!0},suites:[],html:"Test in progress.."}),window.onerror=function(e,t,n){d.emit("global err",e,t,n)},["log","info","warn","error","debug"].forEach(function(e){if(window.console){var t=window.console[e];window.console[e]=function(){var n=l.arr(arguments);d.emit("console",e,n.map(function(e){return e})),t.apply&&t.apply(p,arguments)}}}),window.finish=function(){var e=this.stats;e.running=!1,a("results",{stats:e,suites:f("#mocha-report > .suite").map(i),html:c("#mocha").innerHTML})}},{"rijs.core":3,"rijs.data":5,"rijs.sync":34,"utilise/all":6,"utilise/raw":27,"utilise/to":31}],2:[function(e,t,n){},{}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(){function e(n,i,u){return n?k["default"].arr(n)?n.map(e):k["default"].obj(n)&&!n.name?e:k["default"].fn(n)&&n.resources?e((0,w["default"])(n.resources)):k["default"].str(n)&&!i&&t[n]?t[n].body:!k["default"].str(n)||i||t[n]?k["default"].str(n)&&i?r(e)({name:n,body:i,headers:u}):k["default"].obj(n)&&!k["default"].arr(n)?r(e)(n):(L("could not find or create resource",n),!1):r(e)({name:n}):e}P("creating");var t={};return e.resources=t,e.resource=(0,y["default"])(e),e.register=e,e.types=l(),(0,c["default"])(e)}function r(e){return function(t){var n=t.name,i=t.body,u=t.headers,r=void 0===u?{}:u;P("registering",n);var s=o(e)({name:n,body:i,headers:r}),a=e.resources[n]?"":"load";return s?(e.resources[n]=s,e.emit("change",[e.resources[n],{type:a}]),e.resources[n].body):(L("failed to register",n),!1)}}function o(e){return function(t){return(0,b["default"])("content-type")(t)||(0,w["default"])(e.types).sort((0,S["default"])("priority")).some(a(t)),(0,b["default"])("content-type")(t)?s(e)(t):(L("could not understand resource",t),!1)}}function s(e){return function(t){var n=(0,b["default"])("content-type")(t);return e.types[n]?(e.types[n].parse||g["default"])(t):(L("could not understand type",n),!1)}}function a(e){return function(t){return t.check(e)&&(e.headers["content-type"]=t.header)}}function l(){return[C["default"]].reduce(O["default"].obj("header"),1)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var f=e("utilise/emitterify"),c=i(f),d=e("utilise/colorfill"),p=(i(d),e("utilise/chainable")),y=i(p),m=e("utilise/identity"),g=i(m),h=e("utilise/rebind"),v=(i(h),e("utilise/header")),b=i(v),x=e("utilise/values"),w=i(x),j=e("utilise/is"),k=i(j),_=e("utilise/to"),O=i(_),M=e("utilise/za"),S=i(M),q=e("./types/text"),C=i(q),L=e("utilise/err")("[ri/core]"),P=e("utilise/log")("[ri/core]")},{"./types/text":4,"utilise/chainable":7,"utilise/colorfill":9,"utilise/emitterify":13,"utilise/err":14,"utilise/header":18,"utilise/identity":19,"utilise/is":21,"utilise/log":24,"utilise/rebind":28,"utilise/to":31,"utilise/values":32,"utilise/za":33}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("utilise/includes"),r=i(u),o=e("utilise/is"),s=i(o);n["default"]={header:"text/plain",check:function(e){return!(0,r["default"])(".html")(e.name)&&!(0,r["default"])(".css")(e.name)&&s["default"].str(e.body)}}},{"utilise/includes":20,"utilise/is":21}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(e){return v("creating"),e.on("change.data",r(e)),e.types["application/data"]={header:"application/data",check:function(e){return m["default"].obj(e.body)||!e.body?!0:!1},parse:function(t){var n=e.resources[t.name]||{};return delete t.headers.listeners,(0,c["default"])(t.headers)(n.headers),!t.body&&(t.body=[]),!t.body.on&&(t.body=(0,s["default"])(t.body)),t.body.on.change=t.headers.listeners=t.headers.listeners||[],t.body.on("change.bubble",function(){return e.emit("change",[t],(0,p["default"])(m["default"]["in"](["data"])))}),t}},e}function r(e){return function(t){var n=[arguments[0].body,arguments[1]];return(0,l["default"])("content-type","application/data")(t)&&e.resources[t.name].body.emit("change",h["default"].arr(n),(0,p["default"])(m["default"]["in"](["bubble"])))}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var o=e("utilise/emitterify"),s=i(o),a=e("utilise/header"),l=i(a),f=e("utilise/extend"),c=i(f),d=e("utilise/not"),p=i(d),y=e("utilise/is"),m=i(y),g=e("utilise/to"),h=i(g),v=e("utilise/log")("[ri/types/data]")},{"utilise/emitterify":13,"utilise/extend":15,"utilise/header":18,"utilise/is":21,"utilise/log":24,"utilise/not":25,"utilise/to":31}],6:[function(e,t,n){var i=e("utilise/to");t.exports=function(e,t){var n=!t&&document.head.createShadowRoot?"html /deep/ ":"";return i.arr((t||document).querySelectorAll(n+e))}},{"utilise/to":31}],7:[function(e,t,n){t.exports=function(e){return function(){return e.apply(this,arguments),e}}},{}],8:[function(e,t,n){t.exports="undefined"!=typeof window},{}],9:[function(e,t,n){function i(){["red","green","bold","grey","strip"].forEach(function(e){!r.str(String.prototype[e])&&Object.defineProperty(String.prototype,e,{get:function(){return String(this)}})})}var u=e("utilise/client"),r=(!u&&e("colors"),e("utilise/has"),e("utilise/is"));t.exports=i()},{colors:2,"utilise/client":8,"utilise/has":17,"utilise/is":21}],10:[function(e,t,n){t.exports=function(e,t){return function(n){return t[n]=e[n],n}}},{}],11:[function(e,t,n){var i=e("utilise/sel");t.exports=function(e){return i(e).datum()}},{"utilise/sel":29}],12:[function(e,t,n){var i=e("utilise/has");t.exports=function(e,t,n,u){return!i(e,t)&&Object.defineProperty(e,t,{value:n,writable:u}),e[t]}},{"utilise/has":17}],13:[function(e,t,n){var i=e("utilise/err")("[emitterify]"),u=e("utilise/keys"),r=e("utilise/def"),o=e("utilise/not"),s=e("utilise/is");t.exports=function(e){function t(t,i,r){var a=t.split(".")[1],l=t.split(".")[0],f=e.on[l]||[],c=(f.length-1,s.arr(i)?i:[i||e]);if(a)return n(f,a,c),e;for(var d=f.length;d>=0;d--)n(f,d,c);return u(f).filter(o(isFinite)).filter(r||Boolean).map(function(e){return n(f,e,c)}),e}function n(t,n,u){if(t[n]){var r=t[n];t[n].once&&(isFinite(n)?t.splice(n,1):delete t[n]);try{r.apply(e,u)}catch(o){i(o,o.stack)}}}function a(t,n){var i=t.split(".")[1],u=t.split(".")[0];return e.on[u]=e.on[u]||[],n||i?!n&&i?e.on[u][i]:i?(e.on[u][i]=n,e):(e.on[u].push(n),e):e.on[u]}function l(t,n){return n.once=!0,e.on(t,n),e}return r(e,"on",a),r(e,"once",l),r(e,"emit",t),e}},{"utilise/def":12,"utilise/err":14,"utilise/is":21,"utilise/keys":23,"utilise/not":25}],14:[function(e,t,n){var i=e("utilise/owner"),u=e("utilise/to");t.exports=function(e){return function(t){if(!i.console||!console.error.apply)return t;var n=u.arr(arguments);return n.unshift(e.red?e.red:e),t}}},{"utilise/owner":26,"utilise/to":31}],15:[function(e,t,n){var i=e("utilise/is"),u=e("utilise/not"),r=e("utilise/keys"),o=e("utilise/copy");t.exports=function(e){return function(t){return r(t).filter(u(i["in"](e))).map(o(t,e)),e}}},{"utilise/copy":10,"utilise/is":21,"utilise/keys":23,"utilise/not":25}],16:[function(e,t,n){function i(e){return function(t){return o(t)(e)}}function u(e){return r(this.parentNode)[e]}var r=e("utilise/datum"),o=e("utilise/key");t.exports=i,i.parent=u},{"utilise/datum":11,"utilise/key":22}],17:[function(e,t,n){t.exports=function(e,t){return t in e}},{}],18:[function(e,t,n){var i=e("utilise/has");t.exports=function u(u,e){var t=1==arguments.length;return function(n){return n&&i(n,"headers")&&i(n.headers,u)?t?n.headers[u]:n.headers[u]==e:null}}},{"utilise/has":17}],19:[function(e,t,n){t.exports=function(e){return e}},{}],20:[function(e,t,n){t.exports=function(e){return function(t){return t&&t.indexOf&&~t.indexOf(e)}}},{}],21:[function(e,t,n){function i(e){return function(t){return t==e}}function u(e){return"function"==typeof e}function r(e){return"boolean"==typeof e}function o(e){return"string"==typeof e}function s(e){return"number"==typeof e}function a(e){return"object"==typeof e}function l(e){return"object"==typeof e&&!(e instanceof Array)}function f(e){return 1==!!e}function c(e){return 0==!!e}function d(e){return e instanceof Array}function p(e){return null===e}function y(e){return"undefined"!=typeof e}function m(e){return function(t){return e?e.indexOf?~e.indexOf(t):t in e:!1}}t.exports=i,i.fn=u,i.str=o,i.num=s,i.obj=a,i.lit=l,i.bol=r,i.truthy=f,i.falsy=c,i.arr=d,i["null"]=p,i.def=y,i["in"]=m},{}],22:[function(e,t,n){var i=e("utilise/is"),u=e("utilise/str");t.exports=function r(e,t){var n=arguments.length>1,o=u(e).split("."),s=o.shift();return function(u){function a(e){var t=r(e)(u);void 0!=t&&r(e,t)(l)}var l={};return u?e?i.arr(e)?(e.map(a),l):u[e]||!o.length?n?(u[e]=i.fn(t)?t(u[e]):t,u):u[e]:n?(r(o.join("."),t)(u[s]?u[s]:u[s]={}),u):r(o.join("."))(u[s]):u:void 0}}},{"utilise/is":21,"utilise/str":30}],23:[function(e,t,n){t.exports=function(e){return Object.keys(e||{})}},{}],24:[function(e,t,n){var i=e("utilise/is"),u=e("utilise/to"),r=e("utilise/owner");t.exports=function(e){return function(t){if(!r.console||!console.log.apply)return t;i.arr(arguments[2])&&(arguments[2]=arguments[2].length);var n=u.arr(arguments);return n.unshift(e.grey?e.grey:e),t}}},{"utilise/is":21,"utilise/owner":26,"utilise/to":31}],25:[function(e,t,n){t.exports=function(e){return function(){return!e.apply(this,arguments)}}},{}],26:[function(e,t,n){(function(n){t.exports=e("utilise/client")?window:n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"utilise/client":8}],27:[function(e,t,n){t.exports=function(e,t){var n=!t&&document.head.createShadowRoot?"html /deep/ ":"";return(t?t:document).querySelector(n+e)}},{}],28:[function(e,t,n){function i(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}t.exports=function(e,t){for(var n,u=1,r=arguments.length;++u<r;)e[n=arguments[u]]=i(e,t,t[n]);return e}},{}],29:[function(e,t,n){t.exports=function(e){return e.node?e:d3.select(e)}},{}],30:[function(e,t,n){var i=e("utilise/is");t.exports=function(e){return 0===e?"0":e?i.fn(e)?""+e:i.obj(e)?JSON.stringify(e):String(e):""}},{"utilise/is":21}],31:[function(e,t,n){function i(e){return Array.prototype.slice.call(e,0)}function u(e){function t(e,t,i){return 0===i&&(e={}),e[t[n]]=t,e}var n="id";return 1==arguments.length?(n=e,t):t.apply(this,arguments)}t.exports={arr:i,obj:u}},{}],32:[function(e,t,n){var i=e("utilise/keys"),u=e("utilise/from");t.exports=function(e){return e?i(e).map(u(e)):[]}},{"utilise/from":16,"utilise/keys":23}],33:[function(e,t,n){var i=e("utilise/key");t.exports=function(e){return function(t,n){var u=i(e)(t)||"",r=i(e)(n)||"";return u>r?-1:r>u?1:0}}},{"utilise/key":22}],34:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){return G("creating"),L["default"]||t?((0,M["default"])(e.types).map(f(e)),e.sync=p(e),e.io=d(t),e.on("change",function(t){return p(e)()(t.name)}),e.io.on("change",c(e)),e.io.on("connection",function(t){return t.on("change",r(e))}),e.io.on("connection",function(t){return p(e)(t)()}),e.io.use(g),e):void 0}function r(e){return function(t){function n(n){var r=(0,D["default"])(n)(f),o=t.name,s=n.replace(/(^|\.)_/g,"$1"),d=1==r.length?"push":2==r.length?"update":0===r[2]?"remove":"",p="update"==d?r[1]:r[0],y=Q[d];return d?!a||a.call(i,p,l,s,d,o,y)?(s?y(s,p,l,o,u):c(e)(t),!0):void 0:!1}G("receiving",t.name);var i=this,u=e.resources[t.name],r=h(e)(t).from||b["default"];if(!u)return G("no resource",t.name);if(!r.call(this,t))return K("type skip",t.name);if(!J["default"].obj(u.body))return c(e)(t);var s=(0,q["default"])("proxy-to")(u)||b["default"],a=(0,q["default"])("proxy-from")(u),l=s.call(i,(0,D["default"])("body")(u)),f=(0,$.diff)(l,t.body);return J["default"].arr(f)?n("")&&u.body.emit("change"):void((0,E["default"])(f).reverse().filter((0,R["default"])((0,J["default"])("_t"))).map(o(f)).reduce(_["default"],[]).map(n).some(Boolean)&&u.body.emit("change"))}}function o(e){return function(t){var n=(0,D["default"])(t)(e);return t=J["default"].arr(t)?t:[t],J["default"].arr(n)?t.join("."):(0,E["default"])(n).map((0,j["default"])(t.join(".")+".")).map(o(e))}}function s(e,t,n,i){var u=e.split("."),r=u.pop(),o=(0,D["default"])(u.join("."))(n)||n;J["default"].arr(o)?o.splice(r,0,t):(0,D["default"])(e,t)(n)}function a(e,t,n,i){var u=e.split("."),r=u.pop(),o=(0,D["default"])(u.join("."))(n)||n;J["default"].arr(o)?o.splice(r,1):delete o[r]}function l(e,t,n,i){(0,D["default"])(e,t)(n)}function f(e){return function(t){var n=t.parse||A["default"];t.parse=function(t){if(L["default"])return n.apply(this,arguments),t;var i=e.resources[t.name],u=(0,q["default"])("proxy-from")(i),r=(0,q["default"])("proxy-to")(i);return t.headers["proxy-from"]=(0,q["default"])("proxy-from")(t)||(0,q["default"])("from")(t)||u,t.headers["proxy-to"]=(0,q["default"])("proxy-to")(t)||(0,q["default"])("to")(t)||r,n.apply(this,arguments),t}}}function c(e){return function(t){return t.headers.silent=!0,e(t)}}function d(t){var n=L["default"]?window.io?window.io():J["default"].fn(e("socket.io-client"))?e("socket.io-client")():{on:A["default"],emit:A["default"]}:e("socket.io")(t.server||t);return n.use=n.use||A["default"],n}function p(e){return function(t){return function(n){if(!arguments.length||n){if(!n)return(0,M["default"])(e.resources).map((0,D["default"])("name")).map(p(e)(t)),e;var i=e.resources[n],u=L["default"]?[e.io]:e.io.of("/").sockets,r=m(u.length,n),o=(0,q["default"])("silent",!0)(i);return o?delete i.headers.silent:i?r(J["default"].str(t)?u.filter((0,H["default"])("sessionID",t)).map(y(e)(i)):t?[y(e)(i)(t)]:u.map(y(e)(i))):G("no resource to emit: ",n)}}}}function y(e){return function(t){return function(n){var i,u=J["default"].fn(t.body)?""+t.body:t.body,r={type:h(e)(t).to||b["default"],res:t.headers["proxy-to"]||b["default"]};return(u=r.res.call(n,u))&&(i=r.type.call(n,{name:t.name,body:u,headers:t.headers}))?(n.emit("change",i),!0):!1}}}function m(e,t){return function(n){G((0,T["default"])(n.filter(Boolean).length).green.bold+"/"+(0,T["default"])(e).green,"sending",t)}}function g(e,t){e.ip=e.request.headers["x-forwarded-for"]||e.request.connection.remoteAddress,t()}function h(e){return function(t){return e.types[(0,q["default"])("content-type")(t)]}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var v=e("utilise/identity"),b=i(v),x=e("utilise/replace"),w=(i(x),e("utilise/prepend")),j=i(w),k=e("utilise/flatten"),_=i(k),O=e("utilise/values"),M=i(O),S=e("utilise/header"),q=i(S),C=e("utilise/client"),L=i(C),P=e("utilise/noop"),A=i(P),B=e("utilise/keys"),E=i(B),N=e("utilise/key"),D=i(N),F=e("utilise/str"),T=i(F),z=e("utilise/not"),R=i(z),U=e("utilise/by"),H=i(U),I=e("utilise/is"),J=i(I),$=e("jsondiffpatch"),G=e("utilise/log")("[ri/sync]"),K=(e("utilise/err")("[ri/sync]"),A["default"]),Q={push:s,remove:a,update:l}},{jsondiffpatch:2,"socket.io":2,"socket.io-client":2,"utilise/by":35,"utilise/client":36,"utilise/err":38,"utilise/flatten":39,"utilise/header":42,"utilise/identity":43,"utilise/is":44,"utilise/key":45,"utilise/keys":46,"utilise/log":47,"utilise/noop":48,"utilise/not":49,"utilise/prepend":51,"utilise/replace":52,"utilise/str":54,"utilise/values":56}],35:[function(e,t,n){var i=e("utilise/key"),u=e("utilise/is");t.exports=function(e,t){var n=1==arguments.length;return function(r){var o=i(e)(r);return o&&t&&o.toLowerCase&&t.toLowerCase?o.toLowerCase()===t.toLowerCase():n?Boolean(o):u.fn(t)?t(o):o==t}}},{"utilise/is":44,"utilise/key":45}],36:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],37:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{dup:11,"utilise/sel":53}],38:[function(e,t,n){arguments[4][14][0].apply(n,arguments)},{dup:14,"utilise/owner":50,"utilise/to":55}],39:[function(e,t,n){var i=e("utilise/is");t.exports=function u(e,t){return i.arr(t)&&(t=t.reduce(u,[])),e=e||[],e.concat(t)}},{"utilise/is":44}],40:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{dup:16,"utilise/datum":37,"utilise/key":45}],41:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],42:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,"utilise/has":41}],43:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],44:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],45:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{dup:22,"utilise/is":44,"utilise/str":54}],46:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],47:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24,"utilise/is":44,"utilise/owner":50,"utilise/to":55}],48:[function(e,t,n){t.exports=function(){}},{}],49:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],50:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{dup:26,"utilise/client":36}],51:[function(e,t,n){t.exports=function(e){return function(t){return e+t}}},{}],52:[function(e,t,n){t.exports=function(e,t){return function(n){return n.replace(e,t)}}},{}],53:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],54:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{dup:30,"utilise/is":44}],55:[function(e,t,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],56:[function(e,t,n){arguments[4][32][0].apply(n,arguments)},{dup:32,"utilise/from":40,"utilise/keys":46}]},{},[1]);
