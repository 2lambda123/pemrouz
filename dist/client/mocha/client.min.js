!function e(t,n,i){function u(o,s){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!s&&a)return a(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return u(n?n:e)},f,f.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)u(i[o]);return u}({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(){function e(n,i,u){return n?h["default"].arr(n)?n.map(e):h["default"].obj(n)&&!n.name?e:h["default"].fn(n)&&n.resources?e((0,m["default"])(n.resources)):h["default"].str(n)&&!i&&t[n]?t[n].body:!h["default"].str(n)||i||t[n]?h["default"].str(n)&&i?_(e)({name:n,body:i,headers:u}):h["default"].obj(n)&&!h["default"].arr(n)?_(e)(n):(C("could not find or create resource",n),!1):_(e)({name:n}):e}L("creating");var t={};return e.resources=t,e.resource=(0,l["default"])(e),e.register=e,e.types=q(),(0,o["default"])(e)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var r=e("utilise/emitterify"),o=i(r),s=e("utilise/colorfill"),a=(i(s),e("utilise/chainable")),l=i(a),f=e("utilise/identity"),c=i(f),d=e("utilise/header"),p=i(d),y=e("utilise/values"),m=i(y),g=e("utilise/is"),h=i(g),v=e("utilise/to"),b=i(v),x=e("utilise/za"),w=i(x),j=e("./types/text"),k=i(j),_=function(e){return function(t){var n=t.name,i=t.body,u=t.headers,r=void 0===u?{}:u;L("registering",n);var o=O(e)({name:n,body:i,headers:r}),s=e.resources[n]?"":"load";return o?(e.resources[n]=o,e.emit("change",[e.resources[n],{type:s}]),e.resources[n].body):(C("failed to register",n),!1)}},O=function(e){return function(t){return(0,p["default"])("content-type")(t)||(0,m["default"])(e.types).sort((0,w["default"])("priority")).some(S(t)),(0,p["default"])("content-type")(t)?M(e)(t):(C("could not understand resource",t),!1)}},M=function(e){return function(t){var n=(0,p["default"])("content-type")(t);return e.types[n]?(e.types[n].parse||c["default"])(t):(C("could not understand type",n),!1)}},S=function(e){return function(t){return t.check(e)&&(e.headers["content-type"]=t.header)}},q=function(){return[k["default"]].reduce(b["default"].obj("header"),1)},C=e("utilise/err")("[ri/core]"),L=e("utilise/log")("[ri/core]")},{"./types/text":2,"utilise/chainable":3,"utilise/colorfill":5,"utilise/emitterify":8,"utilise/err":9,"utilise/header":12,"utilise/identity":13,"utilise/is":15,"utilise/log":18,"utilise/to":23,"utilise/values":24,"utilise/za":25}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("utilise/includes"),r=i(u),o=e("utilise/is"),s=i(o);n["default"]={header:"text/plain",check:function(e){return!(0,r["default"])(".html")(e.name)&&!(0,r["default"])(".css")(e.name)&&s["default"].str(e.body)}}},{"utilise/includes":14,"utilise/is":15}],3:[function(e,t,n){t.exports=function(e){return function(){return e.apply(this,arguments),e}}},{}],4:[function(e,t,n){t.exports="undefined"!=typeof window},{}],5:[function(e,t,n){function i(){["red","green","bold","grey","strip"].forEach(function(e){!r.str(String.prototype[e])&&Object.defineProperty(String.prototype,e,{get:function(){return String(this)}})})}var u=e("utilise/client"),r=(!u&&e("colors"),e("utilise/has"),e("utilise/is"));t.exports=i()},{colors:42,"utilise/client":4,"utilise/has":11,"utilise/is":15}],6:[function(e,t,n){var i=e("utilise/sel");t.exports=function(e){return i(e).datum()}},{"utilise/sel":21}],7:[function(e,t,n){var i=e("utilise/has");t.exports=function(e,t,n,u){return!i(e,t)&&Object.defineProperty(e,t,{value:n,writable:u}),e[t]}},{"utilise/has":11}],8:[function(e,t,n){var i=e("utilise/err")("[emitterify]"),u=e("utilise/keys"),r=e("utilise/def"),o=e("utilise/not"),s=e("utilise/is");t.exports=function(e){function t(t,i,r){var a=t.split(".")[1],l=t.split(".")[0],f=e.on[l]||[],c=(f.length-1,s.arr(i)?i:[i||e]);if(a)return n(f,a,c),e;for(var d=f.length;d>=0;d--)n(f,d,c);return u(f).filter(o(isFinite)).filter(r||Boolean).map(function(e){return n(f,e,c)}),e}function n(t,n,u){if(t[n]){var r=t[n];t[n].once&&(isFinite(n)?t.splice(n,1):delete t[n]);try{r.apply(e,u)}catch(o){i(o,o.stack)}}}function a(t,n){var i=t.split(".")[1],u=t.split(".")[0];return e.on[u]=e.on[u]||[],n||i?!n&&i?e.on[u][i]:i?(e.on[u][i]=n,e):(e.on[u].push(n),e):e.on[u]}function l(t,n){return n.once=!0,e.on(t,n),e}return r(e,"on",a,1),r(e,"once",l,1),r(e,"emit",t,1),e}},{"utilise/def":7,"utilise/err":9,"utilise/is":15,"utilise/keys":17,"utilise/not":19}],9:[function(e,t,n){var i=e("utilise/owner"),u=e("utilise/to");t.exports=function(e){return function(t){if(!i.console||!console.error.apply)return t;var n=u.arr(arguments);return n.unshift(e.red?e.red:e),t}}},{"utilise/owner":20,"utilise/to":23}],10:[function(e,t,n){function i(e){return function(t){return o(t)(e)}}function u(e){return r(this.parentNode)[e]}var r=e("utilise/datum"),o=e("utilise/key");t.exports=i,i.parent=u},{"utilise/datum":6,"utilise/key":16}],11:[function(e,t,n){t.exports=function(e,t){return t in e}},{}],12:[function(e,t,n){var i=e("utilise/has");t.exports=function u(u,e){var t=1==arguments.length;return function(n){return n&&i(n,"headers")&&i(n.headers,u)?t?n.headers[u]:n.headers[u]==e:null}}},{"utilise/has":11}],13:[function(e,t,n){t.exports=function(e){return e}},{}],14:[function(e,t,n){t.exports=function(e){return function(t){return t&&t.indexOf&&~t.indexOf(e)}}},{}],15:[function(e,t,n){function i(e){return function(t){return t==e}}function u(e){return"function"==typeof e}function r(e){return"boolean"==typeof e}function o(e){return"string"==typeof e}function s(e){return"number"==typeof e}function a(e){return"object"==typeof e}function l(e){return"object"==typeof e&&!(e instanceof Array)}function f(e){return 1==!!e}function c(e){return 0==!!e}function d(e){return e instanceof Array}function p(e){return null===e}function y(e){return"undefined"!=typeof e}function m(e){return function(t){return e?e.indexOf?~e.indexOf(t):t in e:!1}}t.exports=i,i.fn=u,i.str=o,i.num=s,i.obj=a,i.lit=l,i.bol=r,i.truthy=f,i.falsy=c,i.arr=d,i["null"]=p,i.def=y,i["in"]=m},{}],16:[function(e,t,n){var i=e("utilise/is"),u=e("utilise/str");t.exports=function r(e,t){var n=arguments.length>1,o=u(e).split("."),s=o.shift();return function(u,a){function l(e){var t=r(e)(u);void 0!=t&&r(e,t)(f)}var f={};return u?e?i.arr(e)?(e.map(l),f):u[e]||!o.length?n?(u[e]=i.fn(t)?t(u[e],a):t,u):u[e]:n?(r(o.join("."),t)(u[s]?u[s]:u[s]={}),u):r(o.join("."))(u[s]):u:void 0}}},{"utilise/is":15,"utilise/str":22}],17:[function(e,t,n){t.exports=function(e){return Object.keys(e||{})}},{}],18:[function(e,t,n){var i=e("utilise/is"),u=e("utilise/to"),r=e("utilise/owner");t.exports=function(e){return function(t){if(!r.console||!console.log.apply)return t;i.arr(arguments[2])&&(arguments[2]=arguments[2].length);var n=u.arr(arguments);return n.unshift(e.grey?e.grey:e),t}}},{"utilise/is":15,"utilise/owner":20,"utilise/to":23}],19:[function(e,t,n){t.exports=function(e){return function(){return!e.apply(this,arguments)}}},{}],20:[function(e,t,n){(function(n){t.exports=e("utilise/client")?window:n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"utilise/client":4}],21:[function(e,t,n){t.exports=function(e){return e.node?e:d3.select(e)}},{}],22:[function(e,t,n){var i=e("utilise/is");t.exports=function(e){return 0===e?"0":e?i.fn(e)?""+e:i.obj(e)?JSON.stringify(e):String(e):""}},{"utilise/is":15}],23:[function(e,t,n){function i(e){return Array.prototype.slice.call(e,0)}function u(e){function t(e,t,i){return 0===i&&(e={}),e[t[n]]=t,e}var n="id";return 1==arguments.length?(n=e,t):t.apply(this,arguments)}t.exports={arr:i,obj:u}},{}],24:[function(e,t,n){var i=e("utilise/keys"),u=e("utilise/from");t.exports=function(e){return e?i(e).map(u(e)):[]}},{"utilise/from":10,"utilise/keys":17}],25:[function(e,t,n){var i=e("utilise/key");t.exports=function(e){return function(t,n){var u=i(e)(t)||"",r=i(e)(n)||"";return u>r?-1:r>u?1:0}}},{"utilise/key":16}],26:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(e){return v("creating"),e.on("change.data",r(e)),e.types["application/data"]={header:"application/data",check:function(e){return m["default"].obj(e.body)||!e.body?!0:!1},parse:function(t){var n=e.resources[t.name]||{};return delete t.headers.listeners,(0,c["default"])(t.headers)(n.headers),!t.body&&(t.body=[]),!t.body.on&&(t.body=(0,s["default"])(t.body)),t.body.on.change=t.headers.listeners=t.headers.listeners||[],t.body.on("change.bubble",function(){return e.emit("change",[t],(0,p["default"])(m["default"]["in"](["data"])))}),t}},e}function r(e){return function(t){var n=[arguments[0].body,arguments[1]];return(0,l["default"])("content-type","application/data")(t)&&e.resources[t.name].body.emit("change",h["default"].arr(n),(0,p["default"])(m["default"]["in"](["bubble"])))}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var o=e("utilise/emitterify"),s=i(o),a=e("utilise/header"),l=i(a),f=e("utilise/extend"),c=i(f),d=e("utilise/not"),p=i(d),y=e("utilise/is"),m=i(y),g=e("utilise/to"),h=i(g),v=e("utilise/log")("[ri/types/data]")},{"utilise/emitterify":30,"utilise/extend":32,"utilise/header":34,"utilise/is":35,"utilise/log":37,"utilise/not":38,"utilise/to":40}],27:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],28:[function(e,t,n){t.exports=function(e,t){return function(n){return t[n]=e[n],n}}},{}],29:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7,"utilise/has":33}],30:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{dup:8,"utilise/def":29,"utilise/err":31,"utilise/is":35,"utilise/keys":36,"utilise/not":38}],31:[function(e,t,n){arguments[4][9][0].apply(n,arguments)},{dup:9,"utilise/owner":39,"utilise/to":40}],32:[function(e,t,n){var i=e("utilise/is"),u=e("utilise/not"),r=e("utilise/keys"),o=e("utilise/copy");t.exports=function(e){return function(t){return r(t).filter(u(i["in"](e))).map(o(t,e)),e}}},{"utilise/copy":28,"utilise/is":35,"utilise/keys":36,"utilise/not":38}],33:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],34:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{dup:12,"utilise/has":33}],35:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],36:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],37:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,"utilise/is":35,"utilise/owner":39,"utilise/to":40}],38:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],39:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{dup:20,"utilise/client":27}],40:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],41:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(e){return{name:y("h1",e).textContent,total:""+p(".test",e).length,failures:""+p(".fail",e).length}}function r(){location.reload()}var o=e("rijs.core"),s=i(o),a=e("rijs.data"),l=i(a),f=e("rijs.sync"),c=i(f),d=(0,c["default"])((0,l["default"])((0,s["default"])())),p=e("utilise/all"),y=e("utilise/raw"),m=e("utilise/to"),g=window.console;d.io.on("reload",r),d.io.on("connect",function(e){return d.io.on("connect",r)}),d("results",{stats:{running:!0},suites:[],html:"Test in progress.."}),window.onerror=function(e,t,n){return d.io.emit("global err",e,t,n)},["log","info","warn","error","debug"].map(function(e){if(g){var t=window.console[e];window.console[e]=function(){var n=m.arr(arguments);d.io.emit("console",e,n.map(function(e){return e})),t.apply&&t.apply(g,arguments)}}}),window.finish=function(){var e=this.stats;e.running=!1,d("results",{stats:e,suites:p("#mocha-report > .suite").map(u),html:y("#mocha").innerHTML})}},{"rijs.core":1,"rijs.data":26,"rijs.sync":68,"utilise/all":43,"utilise/raw":44,"utilise/to":45}],42:[function(e,t,n){},{}],43:[function(e,t,n){var i=e("utilise/to");t.exports=function(e,t){var n=!t&&document.head.createShadowRoot?"html /deep/ ":"";return i.arr((t||document).querySelectorAll(n+e))}},{"utilise/to":45}],44:[function(e,t,n){t.exports=function(e,t){var n=!t&&document.head.createShadowRoot?"html /deep/ ":"";return(t?t:document).querySelector(n+e)}},{}],45:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],46:[function(e,t,n){var i=e("utilise/key"),u=e("utilise/is");t.exports=function(e,t){var n=1==arguments.length;return function(r){var o=i(e)(r);return o&&t&&o.toLowerCase&&t.toLowerCase?o.toLowerCase()===t.toLowerCase():n?Boolean(o):u.fn(t)?t(o):o==t}}},{"utilise/is":55,"utilise/key":56}],47:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],48:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{dup:6,"utilise/sel":64}],49:[function(e,t,n){arguments[4][9][0].apply(n,arguments)},{dup:9,"utilise/owner":61,"utilise/to":66}],50:[function(e,t,n){var i=e("utilise/is");t.exports=function u(e,t){return i.arr(t)&&(t=t.reduce(u,[])),e=e||[],e.concat(t)}},{"utilise/is":55}],51:[function(e,t,n){arguments[4][10][0].apply(n,arguments)},{dup:10,"utilise/datum":48,"utilise/key":56}],52:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],53:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{dup:12,"utilise/has":52}],54:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{dup:13}],55:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],56:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{dup:16,"utilise/is":55,"utilise/str":65}],57:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],58:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,"utilise/is":55,"utilise/owner":61,"utilise/to":66}],59:[function(e,t,n){t.exports=function(){}},{}],60:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],61:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{dup:20,"utilise/client":47}],62:[function(e,t,n){t.exports=function(e){return function(t){return e+t}}},{}],63:[function(e,t,n){t.exports=function(e,t){return function(n){return n.replace(e,t)}}},{}],64:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],65:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{dup:22,"utilise/is":55}],66:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],67:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24,"utilise/from":51,"utilise/keys":57}],68:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){return G("creating"),L["default"]||t?((0,M["default"])(e.types).map(f(e)),e.sync=p(e),e.io=d(t),e.on("change",function(t){return p(e)()(t.name)}),e.io.on("change",c(e)),e.io.on("connection",function(t){return t.on("change",r(e))}),e.io.on("connection",function(t){return p(e)(t)()}),e.io.use(g),e):void 0}function r(e){return function(t){function n(n){var r=(0,E["default"])(n)(f),o=t.name,s=n.replace(/(^|\.)_/g,"$1"),d=1==r.length?"push":2==r.length?"update":0===r[2]?"remove":"",p="update"==d?r[1]:r[0],y=Q[d];return d?!a||a.call(i,p,l,s,d,o,y)?(s?y(s,p,l,o,u):c(e)(t),!0):void 0:!1}G("receiving",t.name);var i=this,u=e.resources[t.name],r=h(e)(t).from||b["default"];if(!u)return G("no resource",t.name);if(!r.call(this,t))return K("type skip",t.name);if(!J["default"].obj(u.body))return c(e)(t);var s=(0,q["default"])("proxy-to")(u)||b["default"],a=(0,q["default"])("proxy-from")(u),l=s.call(i,(0,E["default"])("body")(u)),f=(0,$.diff)(l,t.body);return J["default"].arr(f)?n("")&&u.body.emit("change"):void((0,N["default"])(f).reverse().filter((0,R["default"])((0,J["default"])("_t"))).map(o(f)).reduce(_["default"],[]).map(n).some(Boolean)&&u.body.emit("change"))}}function o(e){return function(t){var n=(0,E["default"])(t)(e);return t=J["default"].arr(t)?t:[t],J["default"].arr(n)?t.join("."):(0,N["default"])(n).map((0,j["default"])(t.join(".")+".")).map(o(e))}}function s(e,t,n,i){var u=e.split("."),r=u.pop(),o=(0,E["default"])(u.join("."))(n)||n;J["default"].arr(o)?o.splice(r,0,t):(0,E["default"])(e,t)(n)}function a(e,t,n,i){var u=e.split("."),r=u.pop(),o=(0,E["default"])(u.join("."))(n)||n;J["default"].arr(o)?o.splice(r,1):delete o[r]}function l(e,t,n,i){(0,E["default"])(e,t)(n)}function f(e){return function(t){var n=t.parse||A["default"];t.parse=function(t){if(L["default"])return n.apply(this,arguments),t;var i=e.resources[t.name],u=(0,q["default"])("proxy-from")(i),r=(0,q["default"])("proxy-to")(i);return t.headers["proxy-from"]=(0,q["default"])("proxy-from")(t)||(0,q["default"])("from")(t)||u,t.headers["proxy-to"]=(0,q["default"])("proxy-to")(t)||(0,q["default"])("to")(t)||r,n.apply(this,arguments),t}}}function c(e){return function(t){return t.headers.silent=!0,e(t)}}function d(t){var n=L["default"]?window.io?window.io():J["default"].fn(e("socket.io-client"))?e("socket.io-client")():{on:A["default"],emit:A["default"]}:e("socket.io")(t.server||t);return n.use=n.use||A["default"],n}function p(e){return function(t){return function(n){if(!arguments.length||n){if(!n)return(0,M["default"])(e.resources).map((0,E["default"])("name")).map(p(e)(t)),e;var i=e.resources[n],u=L["default"]?[e.io]:e.io.of("/").sockets,r=m(u.length,n),o=(0,q["default"])("silent",!0)(i);return o?delete i.headers.silent:i?r(J["default"].str(t)?u.filter((0,H["default"])("sessionID",t)).map(y(e)(i)):t?[y(e)(i)(t)]:u.map(y(e)(i))):G("no resource to emit: ",n)}}}}function y(e){return function(t){return function(n){var i,u=J["default"].fn(t.body)?""+t.body:t.body,r={type:h(e)(t).to||b["default"],res:t.headers["proxy-to"]||b["default"]};return(u=r.res.call(n,u))&&(i=r.type.call(n,{name:t.name,body:u,headers:t.headers}))?(n.emit("change",i),!0):!1}}}function m(e,t){return function(n){G((0,T["default"])(n.filter(Boolean).length).green.bold+"/"+(0,T["default"])(e).green,"sending",t)}}function g(e,t){e.ip=e.request.headers["x-forwarded-for"]||e.request.connection.remoteAddress,t()}function h(e){return function(t){return e.types[(0,q["default"])("content-type")(t)]}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var v=e("utilise/identity"),b=i(v),x=e("utilise/replace"),w=(i(x),e("utilise/prepend")),j=i(w),k=e("utilise/flatten"),_=i(k),O=e("utilise/values"),M=i(O),S=e("utilise/header"),q=i(S),C=e("utilise/client"),L=i(C),P=e("utilise/noop"),A=i(P),B=e("utilise/keys"),N=i(B),D=e("utilise/key"),E=i(D),F=e("utilise/str"),T=i(F),z=e("utilise/not"),R=i(z),U=e("utilise/by"),H=i(U),I=e("utilise/is"),J=i(I),$=e("jsondiffpatch"),G=e("utilise/log")("[ri/sync]"),K=(e("utilise/err")("[ri/sync]"),A["default"]),Q={push:s,remove:a,update:l}},{jsondiffpatch:42,"socket.io":42,"socket.io-client":42,"utilise/by":46,"utilise/client":47,"utilise/err":49,"utilise/flatten":50,"utilise/header":53,"utilise/identity":54,"utilise/is":55,"utilise/key":56,"utilise/keys":57,"utilise/log":58,"utilise/noop":59,"utilise/not":60,"utilise/prepend":62,"utilise/replace":63,"utilise/str":65,"utilise/values":67}]},{},[41]);
